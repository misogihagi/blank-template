## はじめに

- [決定](#決定)
- [ステータス](#ステータス)
- [背景](#背景)
- [想定される影響](#想定される影響)
- [検討した他の選択肢](#検討した他の選択肢)
- [参考文献](#参考文献)
- [結果](#結果)

## 決定

Green FrameをGitHub Actionsに組み込む

## ステータス

### <img src="https://raw.githubusercontent.com/FortAwesome/Font-Awesome/refs/heads/6.x/svgs/regular/circle-check.svg" width="10" alt="承認済み" /> 承認済み

## 背景

GreenFrameをGitHub Actionsに組み込む最大の理由は、**開発プロセスの早い段階でウェブアプリケーションの二酸化炭素排出量を継続的に測定・監視し、環境への負荷を低減する**ためです。

### 1\. **「カーボンリーク」の早期発見と防止** 🚨

GreenFrameはウェブアプリケーションのカーボンフットプリント（二酸化炭素排出量）を見積もるCLIツールです。GitHub Actionsでコードの変更（プルリクエストなど）ごとにこの分析を実行することで、\*\*「カーボンリーク」（意図しない排出量の増加）\*\*が発生した場合に即座に検知できます。
これにより、デプロイ前に環境負荷の高い変更を特定し、修正することが可能になります。

### 2\. **排出量の上限（閾値）設定とビルド失敗** 🚫

`--threshold`オプションを使用すると、許容できる最大のCO2排出量を設定できます。
GitHub Actionsでこの閾値を設定し、分析結果がそれを超えた場合に**ビルドを強制的に失敗**させることができます。これにより、環境性能を品質基準の一つとして扱い、排出量の増加を防ぐための厳格なガードレールを設けることができます。

```sh
$ greenframe analyze https://cnn.com --threshold=0.045
❌ main scenario failed
```

### 3\. **継続的な監視と傾向の追跡** 📈

[greenframe.io](https://greenframe.io)サービスと連携（`GREENFRAME_SECRET_TOKEN`を使用）することで、以下のメリットが得られます。

  * **時系列での監視**: ダッシュボードでカーボンフットプリントの**経時的な変化**を追跡できます。
  * **プルリクエストごとの比較**: `main`ブランチの最新分析結果と現在のブランチの分析を\*\*自動で比較（Diffing Against Previous Analyses）\*\*し、変更が排出量に与える影響をすぐに確認できます。
  * **詳細な内訳**: シナリオ、コンテナ、ステップごとの詳細な分析レポートを取得できます。

GitHub Actionsで定期的にまたはブランチマージ時に実行することで、アプリケーションの環境性能が低下していないか継続的にチェックする自動化されたプロセスを確立できます。

### 4\. **フルスタック分析による包括的な評価** 🌐

GreenFrameは、ブラウザ、画面、ネットワークだけでなく、`--containers`や`--databaseContainers`オプションを使って、**Dockerコンテナで動作するサーバーやデータベースを含めたフルスタック**のエネルギー消費を監視できます。
CI環境でアプリケーションのテスト環境を立ち上げ、その環境全体を分析することで、本番に近い状態での正確なカーボンフットプリントを計測できます。

## 想定される影響

<!-- この変更によって、何が簡単になり、何が難しくなるか？ -->

## 検討した他の選択肢

<!-- 後から他の選択肢を考慮したか、気にする必要がないように書いておく -->

## 参考文献

<!-- この変更の参考となった資料 -->

## 結果

<!-- この変更によって、もたらされた結果を後で書き込む -->
